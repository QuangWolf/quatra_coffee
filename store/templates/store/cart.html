{% load cart_filters %} 
{% load humanize %}
{% csrf_token %}


{% block content %}
<h2>🛒 Giỏ hàng của bạn</h2>

{% if cart %}
<table border="1" cellpadding="10" cellspacing="0" style="width: 100%; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="text-align:left;">Sản phẩm</th>
            <th style="text-align:center;">Số lượng</th>
            <th style="text-align:right;">Đơn giá</th>
            <th style="text-align:right;">Thành tiền</th>
        </tr>
    </thead>
    <tbody>
        {% for item in cart.values %}
        <tr>
            <td>{{ item.name }}</td>
            <td style="text-align:center;">{{ item.quantity }}</td>
            <td style="text-align:right;">{{ item.price|floatformat:0 }} đ</td>
            <td style="text-align:right;">{{ item.price|floatformat:0|add:"0"|mul:item.quantity|floatformat:0 }} đ</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3 style="text-align:right; margin-top: 20px;">
    Tổng cộng: <strong>{{ total_price|floatformat:0 }} đ</strong>
</h3>
    <a href="{% url 'home' %}" class="btn btn-secondary">← Quay lại mua hàng</a>    
<div style="text-align:right; margin-top: 20px;">
    <a href="{% url 'checkout' %}" class="btn btn-success">Tiến hành thanh toán</a>
</div>

{% else %}
<p>Giỏ hàng của bạn đang trống.</p>
{% endif %}

{% endblock %}